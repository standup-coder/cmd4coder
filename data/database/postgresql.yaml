category: "Database"
description: "PostgreSQL database management tools and commands"
commands:
  - name: "psql"
    description: "PostgreSQL interactive terminal"
    category: "Database"
    platforms:
      - "linux"
      - "darwin"
      - "windows"
    usage:
      - "psql [options] [dbname [username]]"
    options:
      - flag: "-h"
        description: "Database server host"
      - flag: "-p"
        description: "Database server port"
      - flag: "-U"
        description: "Database user name"
      - flag: "-d"
        description: "Database name"
      - flag: "-c"
        description: "Execute single command and exit"
      - flag: "-f"
        description: "Execute commands from file"
    examples:
      - command: "psql -U postgres"
        description: "Connect as postgres user"
      - command: "psql -h localhost -U admin -d mydb"
        description: "Connect to specific database"
      - command: "psql -c 'SELECT version();'"
        description: "Execute single SQL command"
      - command: "psql -f script.sql"
        description: "Execute SQL from file"
    risks:
      - level: "high"
        description: "Direct database access; can modify or delete data"
      - level: "medium"
        description: "SQL injection risk if using dynamic queries"
    install_method: "Install PostgreSQL package"
    version_check: "psql --version"

  - name: "pg_dump"
    description: "PostgreSQL database backup utility"
    category: "Database"
    platforms:
      - "linux"
      - "darwin"
      - "windows"
    usage:
      - "pg_dump [options] dbname > output.sql"
    options:
      - flag: "-U"
        description: "Database user name"
      - flag: "-h"
        description: "Database host"
      - flag: "-F"
        description: "Output format (c=custom, t=tar, p=plain)"
      - flag: "-t"
        description: "Dump specific table"
      - flag: "--schema-only"
        description: "Dump only schema, no data"
      - flag: "--data-only"
        description: "Dump only data, no schema"
    examples:
      - command: "pg_dump mydb > mydb_backup.sql"
        description: "Backup database to SQL file"
      - command: "pg_dump -U postgres -Fc mydb > mydb.dump"
        description: "Backup in custom format"
      - command: "pg_dump --schema-only mydb > schema.sql"
        description: "Backup only database schema"
      - command: "pg_dump -t mytable mydb > table_backup.sql"
        description: "Backup specific table"
    risks:
      - level: "medium"
        description: "Large databases may take significant time and disk space"
      - level: "low"
        description: "May impact performance on busy servers"
    install_method: "Included with PostgreSQL"
    version_check: "pg_dump --version"

  - name: "pg_restore"
    description: "Restore PostgreSQL database from archive"
    category: "Database"
    platforms:
      - "linux"
      - "darwin"
      - "windows"
    usage:
      - "pg_restore [options] filename"
    options:
      - flag: "-d"
        description: "Database name"
      - flag: "-U"
        description: "Database user name"
      - flag: "-c"
        description: "Clean (drop) database objects before recreating"
      - flag: "-C"
        description: "Create database before restoring"
      - flag: "-t"
        description: "Restore specific table"
    examples:
      - command: "pg_restore -d mydb mydb.dump"
        description: "Restore database from dump file"
      - command: "pg_restore -C -d postgres mydb.dump"
        description: "Create and restore database"
      - command: "pg_restore -c -d mydb mydb.dump"
        description: "Clean and restore database"
    risks:
      - level: "high"
        description: "Can overwrite existing data; backup before restoring"
      - level: "medium"
        description: "Clean option drops all objects; use with caution"
    install_method: "Included with PostgreSQL"
    version_check: "pg_restore --version"

  - name: "createdb"
    description: "Create a new PostgreSQL database"
    category: "Database"
    platforms:
      - "linux"
      - "darwin"
      - "windows"
    usage:
      - "createdb [options] dbname"
    options:
      - flag: "-U"
        description: "Database user name"
      - flag: "-h"
        description: "Database host"
      - flag: "-O"
        description: "Database owner"
      - flag: "-E"
        description: "Encoding"
    examples:
      - command: "createdb mydb"
        description: "Create new database"
      - command: "createdb -U postgres -O admin mydb"
        description: "Create database with specific owner"
      - command: "createdb -E UTF8 mydb"
        description: "Create database with UTF8 encoding"
    risks:
      - level: "medium"
        description: "Creates new database; requires appropriate privileges"
    install_method: "Included with PostgreSQL"
    version_check: "createdb --version"

  - name: "dropdb"
    description: "Remove a PostgreSQL database"
    category: "Database"
    platforms:
      - "linux"
      - "darwin"
      - "windows"
    usage:
      - "dropdb [options] dbname"
    options:
      - flag: "-U"
        description: "Database user name"
      - flag: "-h"
        description: "Database host"
      - flag: "-i"
        description: "Prompt before deletion"
    examples:
      - command: "dropdb mydb"
        description: "Drop database"
      - command: "dropdb -i mydb"
        description: "Drop with confirmation prompt"
    risks:
      - level: "critical"
        description: "Permanently deletes database; cannot be undone"
      - level: "high"
        description: "Always backup before dropping database"
    install_method: "Included with PostgreSQL"
    version_check: "dropdb --version"

  - name: "pg_isready"
    description: "Check PostgreSQL server connection status"
    category: "Database"
    platforms:
      - "linux"
      - "darwin"
      - "windows"
    usage:
      - "pg_isready [options]"
    options:
      - flag: "-h"
        description: "Database host"
      - flag: "-p"
        description: "Database port"
      - flag: "-U"
        description: "Database user"
    examples:
      - command: "pg_isready"
        description: "Check if server is accepting connections"
      - command: "pg_isready -h localhost -p 5432"
        description: "Check specific host and port"
    risks:
      - level: "low"
        description: "Read-only check; no risks"
    install_method: "Included with PostgreSQL"
    version_check: "pg_isready --version"

  - name: "vacuumdb"
    description: "Garbage-collect and analyze a PostgreSQL database"
    category: "Database"
    platforms:
      - "linux"
      - "darwin"
      - "windows"
    usage:
      - "vacuumdb [options] dbname"
    options:
      - flag: "-U"
        description: "Database user name"
      - flag: "-z"
        description: "Also run analyze"
      - flag: "-f"
        description: "Full vacuum"
      - flag: "-t"
        description: "Vacuum specific table"
      - flag: "-a"
        description: "Vacuum all databases"
    examples:
      - command: "vacuumdb mydb"
        description: "Vacuum database"
      - command: "vacuumdb -z mydb"
        description: "Vacuum and analyze database"
      - command: "vacuumdb -f mydb"
        description: "Full vacuum (reclaims more space)"
      - command: "vacuumdb -a"
        description: "Vacuum all databases"
    risks:
      - level: "medium"
        description: "Full vacuum locks tables; may impact performance"
      - level: "low"
        description: "Regular vacuum is safe but may take time"
    install_method: "Included with PostgreSQL"
    version_check: "vacuumdb --version"

  - name: "pg_basebackup"
    description: "Take a base backup of a PostgreSQL cluster"
    category: "Database"
    platforms:
      - "linux"
      - "darwin"
      - "windows"
    usage:
      - "pg_basebackup [options]"
    options:
      - flag: "-D"
        description: "Output directory"
      - flag: "-U"
        description: "Database user"
      - flag: "-h"
        description: "Database host"
      - flag: "-F"
        description: "Output format (p=plain, t=tar)"
      - flag: "-z"
        description: "Compress tar output"
    examples:
      - command: "pg_basebackup -D /backup/pg -U replication"
        description: "Create base backup"
      - command: "pg_basebackup -D /backup/pg -Ft -z"
        description: "Create compressed tar backup"
    risks:
      - level: "medium"
        description: "Requires replication privileges; backup may be large"
    install_method: "Included with PostgreSQL"
    version_check: "pg_basebackup --version"

  - name: "createuser"
    description: "Create a new PostgreSQL user"
    category: "Database"
    platforms:
      - "linux"
      - "darwin"
      - "windows"
    usage:
      - "createuser [options] username"
    options:
      - flag: "-U"
        description: "Database admin user"
      - flag: "-s"
        description: "Create superuser"
      - flag: "-d"
        description: "User can create databases"
      - flag: "-P"
        description: "Prompt for password"
    examples:
      - command: "createuser -P myuser"
        description: "Create user with password"
      - command: "createuser -s -P admin"
        description: "Create superuser with password"
      - command: "createuser -d developer"
        description: "Create user who can create databases"
    risks:
      - level: "high"
        description: "Creating superuser grants full database control"
      - level: "medium"
        description: "Ensure strong passwords for new users"
    install_method: "Included with PostgreSQL"
    version_check: "createuser --version"

  - name: "dropuser"
    description: "Remove a PostgreSQL user"
    category: "Database"
    platforms:
      - "linux"
      - "darwin"
      - "windows"
    usage:
      - "dropuser [options] username"
    options:
      - flag: "-U"
        description: "Database admin user"
      - flag: "-i"
        description: "Prompt before deletion"
    examples:
      - command: "dropuser myuser"
        description: "Drop user"
      - command: "dropuser -i myuser"
        description: "Drop user with confirmation"
    risks:
      - level: "high"
        description: "Removes user access; may affect running applications"
    install_method: "Included with PostgreSQL"
    version_check: "dropuser --version"
